import{j as a}from"./jsx-runtime-BYYWji4R.js";import{r as T}from"./index-ClcD9ViR.js";import{c as N}from"./cn-CytzSlOG.js";const w=400,A=300,h={top:20,right:20,bottom:40,left:60};function E(y){const{data:u,maxValue:d,showGrid:g=!0,gridLines:f=5}=y,[j,v]=T.useState(null),m=w-h.left-h.right,x=A-h.top-h.bottom,c=T.useMemo(()=>{if(d!==void 0)return d;let s=0;return u.forEach(o=>{o.values.forEach(l=>{l.value>s&&(s=l.value)})}),s||10},[u,d]),H=T.useMemo(()=>{const s=u.length,o=20,l=2,e=(m-o*(s-1))/s;return u.map((t,n)=>{const p=t.values.length,G=(e-l*(p-1))/p,W=t.values.map((b,V)=>{const D=b.value/c*x;return{id:b.id,groupLabel:t.label,x:h.left+n*(e+o)+V*(G+l),y:h.top+x-D,width:G,height:D,value:b.value,label:b.label,color:b.color||`var(--color-primary-${(V+1)*100})`}});return{label:t.label,bars:W}})},[u,c,m,x]),i=T.useMemo(()=>{if(!g)return[];const s=[];for(let o=0;o<=f;o++)s.push(c/f*o);return s},[g,f,c]);return{groups:H,maxValue:c,gridLines:i,hoveredBar:j,setHoveredBar:v}}const $=500,q=300,r={top:20,right:20,bottom:40,left:60};function M({data:y,maxValue:u,showGrid:d=!0,gridLines:g=5,showLabels:f=!0,className:j,width:v=$,height:m=q}){var L;const{groups:x,maxValue:c,gridLines:H,hoveredBar:i,setHoveredBar:s}=E({data:y,maxValue:u,showGrid:d,gridLines:g}),o=v-r.left-r.right,l=m-r.top-r.bottom;return a.jsx("div",{className:N("inline-block bg-[var(--bg-surface)] p-4",j),children:a.jsxs("svg",{width:v,height:m,className:"select-none",style:{overflow:"visible"},children:[d&&H.map((e,t)=>{const n=r.top+l-e/c*l;return a.jsxs("g",{children:[a.jsx("line",{x1:r.left,y1:n,x2:r.left+o,y2:n,stroke:"var(--border-subtle)",strokeWidth:"1",strokeDasharray:"4 2"}),a.jsx("text",{x:r.left-8,y:n+4,textAnchor:"end",className:"text-[10px]",fill:"var(--text-tertiary)",children:Math.round(e)})]},`grid-${t}`)}),x.map((e,t)=>a.jsxs("g",{children:[e.bars.map((n,p)=>{const G=(i==null?void 0:i.groupIndex)===t&&(i==null?void 0:i.barIndex)===p;return a.jsx("rect",{x:n.x,y:n.y,width:n.width,height:n.height,fill:n.color,className:N("transition-all duration-150 cursor-pointer",i&&!G&&"opacity-40"),onMouseEnter:()=>s({groupIndex:t,barIndex:p}),onMouseLeave:()=>s(null)},`bar-${p}`)}),f&&a.jsx("text",{x:e.bars[0].x+(e.bars[e.bars.length-1].x+e.bars[e.bars.length-1].width-e.bars[0].x)/2,y:r.top+l+20,textAnchor:"middle",className:"text-xs font-bold",fill:"var(--text-secondary)",children:e.label})]},`group-${t}`)),a.jsx("line",{x1:r.left,y1:r.top+l,x2:r.left+o,y2:r.top+l,stroke:"var(--border-default)",strokeWidth:"2"}),a.jsx("g",{transform:`translate(${r.left}, ${m+25})`,children:(L=y[0])==null?void 0:L.values.map((e,t)=>a.jsxs("g",{transform:`translate(${t*120}, 0)`,children:[a.jsx("rect",{width:12,height:12,fill:e.color||`var(--color-primary-${(t+1)*100})`}),a.jsx("text",{x:18,y:11,className:"text-[10px] font-medium",fill:"var(--text-secondary)",children:e.label})]},t))})]})})}M.__docgenInfo={description:"",methods:[],displayName:"GroupedBarChart",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"GroupedDataPoint"}],raw:"GroupedDataPoint[]"},description:""},maxValue:{required:!1,tsType:{name:"number"},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},gridLines:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"300",computed:!1}},showLabels:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{M as G};
