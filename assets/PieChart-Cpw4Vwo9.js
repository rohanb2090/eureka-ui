import{j as n}from"./jsx-runtime-BYYWji4R.js";import{r as u}from"./index-ClcD9ViR.js";import{c as T}from"./cn-CytzSlOG.js";import{u as R}from"./useChartTheme-DtcSC9jR.js";const L=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"];function k(x){const{data:r,variant:l="pie"}=x,[$,p]=u.useState(null),i=u.useMemo(()=>r.reduce((a,s)=>a+s.value,0),[r]),t=u.useMemo(()=>{if(i===0)return[];let a=-90;return r.map((s,e)=>{const o=s.value/i*100,j=s.value/i*360,C=a,b=a+j,c=100,h=l==="donut"?60:0,f=C*Math.PI/180,v=b*Math.PI/180,w=100+c*Math.cos(f),N=100+c*Math.sin(f),A=100+c*Math.cos(v),I=100+c*Math.sin(v),P=j>180?1:0;let M;if(l==="donut"){const q=100+h*Math.cos(f),E=100+h*Math.sin(f),D=100+h*Math.cos(v),F=100+h*Math.sin(v);M=[`M ${w} ${N}`,`A ${c} ${c} 0 ${P} 1 ${A} ${I}`,`L ${D} ${F}`,`A ${h} ${h} 0 ${P} 0 ${q} ${E}`,"Z"].join(" ")}else M=["M 100 100",`L ${w} ${N}`,`A ${c} ${c} 0 ${P} 1 ${A} ${I}`,"Z"].join(" ");return a=b,{startAngle:C,endAngle:b,value:s.value,percentage:o,label:s.label,color:s.color||L[e%L.length],path:M}})},[r,i,l]),d=u.useCallback(a=>{p(a)},[]),m=u.useCallback(()=>{p(null)},[]),y=u.useCallback(a=>{const s=t[a];return{tabIndex:0,role:"graphics-symbol","aria-label":`${s.label}: ${s.value} (${s.percentage.toFixed(1)}%)`,onMouseEnter:()=>d(a),onMouseLeave:m,onFocus:()=>d(a),onBlur:m}},[t,d,m]),g=u.useMemo(()=>({role:"img","aria-label":`${l==="donut"?"Donut":"Pie"} chart with ${r.length} segments`}),[r.length,l]);return{segments:t,total:i,chartProps:g,getSegmentProps:y,hoveredIndex:$}}function V({data:x,variant:r="pie",size:l=200,showLabels:$=!0,showPercentages:p=!0,className:i}){const t=R(),{segments:d,total:m,chartProps:y,getSegmentProps:g,hoveredIndex:a}=k({data:x,variant:r}),s=e=>e?e.includes("var(--action-primary)")?t.actionPrimary:e.includes("var(--status-success)")?t.statusSuccess:e.includes("var(--status-warning)")?t.statusWarning:e.includes("var(--status-error)")?t.statusError:e.includes("var(--status-info)")?t.statusInfo:e.includes("var(--chart-1)")?t.chart1:e.includes("var(--chart-2)")?t.chart2:e.includes("var(--chart-3)")?t.chart3:e.includes("var(--chart-4)")?t.chart4:e.includes("var(--chart-5)")?t.chart5:e:t.chart1;return n.jsxs("div",{className:T("inline-flex flex-col items-center gap-4",i),children:[n.jsxs("svg",{...y,width:l,height:l,viewBox:"-5 -5 210 210",className:"select-none",children:[d.map((e,o)=>n.jsx("path",{...g(o),d:e.path,fill:s(e.color),className:T("transition-opacity cursor-pointer","focus:outline-none focus:ring-2 focus:ring-border-focus",a!==null&&a!==o&&"opacity-50"),style:{transform:a===o?"scale(1.05)":"scale(1)",transformOrigin:"100px 100px",transition:"transform 200ms, opacity 200ms"}},`segment-${o}`)),r==="donut"&&n.jsx("text",{x:"100",y:"105",textAnchor:"middle",className:"text-2xl font-bold pointer-events-none",fill:t.textPrimary,style:{fontFamily:"inherit"},children:m})]}),$&&n.jsx("div",{className:"flex flex-wrap gap-3 justify-center max-w-xs",children:d.map((e,o)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3",style:{backgroundColor:e.color}}),n.jsxs("span",{className:"text-sm text-text-secondary",children:[e.label,p&&n.jsxs("span",{className:"text-text-tertiary ml-1",children:["(",e.percentage.toFixed(1),"%)"]})]})]},`legend-${o}`))})]})}V.__docgenInfo={description:"",methods:[],displayName:"PieChart",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"PieChartDataPoint"}],raw:"PieChartDataPoint[]"},description:""},variant:{required:!1,tsType:{name:"union",raw:"'pie' | 'donut'",elements:[{name:"literal",value:"'pie'"},{name:"literal",value:"'donut'"}]},description:"",defaultValue:{value:"'pie'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"200",computed:!1}},showLabels:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showPercentages:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{V as P};
