import{j as o}from"./jsx-runtime-BYYWji4R.js";import{r as P}from"./index-ClcD9ViR.js";import{c as S}from"./cn-CytzSlOG.js";import{u as _}from"./useChartTheme-DtcSC9jR.js";const $=400,w=300,m={top:20,right:40,bottom:40,left:60};function C(j){const{data:c,xMin:f,xMax:h,yMin:M,yMax:T,width:k=$,height:H=w}=j,[g,q]=P.useState(null),a=f!==void 0?f:Math.min(...c.map(r=>r.x),0),i=h!==void 0?h:Math.max(...c.map(r=>r.x),10),e=M!==void 0?M:Math.min(...c.map(r=>r.y),0),u=T!==void 0?T:Math.max(...c.map(r=>r.y),10),b=k-m.left-m.right,y=H-m.top-m.bottom,A=P.useMemo(()=>c.map((r,n)=>{const v=(r.x-a)/(i-a),d=(r.y-e)/(u-e);return{...r,id:r.id||`point-${n}`,cx:m.left+v*b,cy:m.top+y-d*y,r:r.size||5}}),[c,a,i,e,u,b,y]),D=P.useMemo(()=>{const r=[];for(let n=0;n<=5;n++)r.push(a+(i-a)*(n/5));return r},[a,i]),N=P.useMemo(()=>{const r=[];for(let n=0;n<=5;n++)r.push(e+(u-e)*(n/5));return r},[e,u]);return{points:A,xTicks:D,yTicks:N,xMin:a,xMax:i,yMin:e,yMax:u,hoveredPoint:g,setHoveredPoint:q}}const G=450,V=350,t={top:20,right:40,bottom:50,left:60};function L({data:j,xLabel:c,yLabel:f,xMin:h,xMax:M,yMin:T,yMax:k,showGrid:H=!0,showYAxis:g=!0,className:q,width:a=G,height:i=V}){const e=_(),{points:u,xTicks:b,yTicks:y,xMin:A,xMax:D,yMin:N,yMax:r,hoveredPoint:n,setHoveredPoint:v}=C({data:j,xMin:h,xMax:M,yMin:T,yMax:k,width:a,height:i}),d=a-t.left-t.right,l=i-t.top-t.bottom,F=A??0,W=D??10,I=N??0,Y=r??10,X=s=>!s||s.includes("var(--action-primary)")?e.actionPrimary:s.includes("var(--status-success)")?e.statusSuccess:s.includes("var(--status-warning)")?e.statusWarning:s.includes("var(--status-error)")?e.statusError:s.includes("var(--status-info)")?e.statusInfo:s;return o.jsx("div",{className:S("inline-block bg-bg-surface p-4",q),style:{backgroundColor:e.bgSurface},children:o.jsxs("svg",{width:a,height:i,className:"select-none",style:{overflow:"visible"},children:[y.map((s,x)=>{const E=(s-I)/(Y-I||1),p=t.top+l-E*l;return o.jsxs("g",{children:[H&&o.jsx("line",{x1:t.left,y1:p,x2:t.left+d,y2:p,stroke:e.borderSubtle,strokeWidth:"1",strokeDasharray:"4 2"}),g&&o.jsx("text",{x:t.left-8,y:p+4,textAnchor:"end",className:"text-[10px]",fill:e.textSecondary,style:{fontFamily:"inherit"},children:s.toFixed(1)})]},`y-${x}`)}),b.map((s,x)=>{const E=(s-F)/(W-F||1),p=t.left+E*d;return o.jsx("g",{children:o.jsx("text",{x:p,y:t.top+l+20,textAnchor:"middle",className:"text-[10px]",fill:e.textSecondary,style:{fontFamily:"inherit"},children:s.toFixed(1)})},`x-${x}`)}),u.map(s=>{const x=n===s.id;return o.jsx("circle",{cx:s.cx,cy:s.cy,r:x?s.r+2:s.r,fill:X(s.color),className:S("transition-all duration-150 cursor-pointer",n&&!x&&"opacity-30"),onMouseEnter:()=>v(s.id),onMouseLeave:()=>v(null)},s.id)}),o.jsx("line",{x1:t.left,y1:t.top+l,x2:t.left+d,y2:t.top+l,stroke:e.borderDefault,strokeWidth:"2"}),o.jsx("line",{x1:t.left,y1:t.top,x2:t.left,y2:t.top+l,stroke:e.borderDefault,strokeWidth:"2"}),c&&o.jsx("text",{x:t.left+d/2,y:i+10,textAnchor:"middle",className:"text-xs font-semibold",fill:e.textSecondary,style:{fontFamily:"inherit"},children:c}),f&&o.jsx("text",{transform:`rotate(-90, ${t.left/2}, ${t.top+l/2})`,x:t.left/2,y:t.top+l/2,textAnchor:"middle",className:"text-xs font-semibold",fill:e.textSecondary,style:{fontFamily:"inherit"},children:f})]})})}L.__docgenInfo={description:"",methods:[],displayName:"ScatterPlot",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"ScatterPoint"}],raw:"ScatterPoint[]"},description:""},xLabel:{required:!1,tsType:{name:"string"},description:""},yLabel:{required:!1,tsType:{name:"string"},description:""},xMin:{required:!1,tsType:{name:"number"},description:""},xMax:{required:!1,tsType:{name:"number"},description:""},yMin:{required:!1,tsType:{name:"number"},description:""},yMax:{required:!1,tsType:{name:"number"},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"450",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"350",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},showYAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{L as S};
