import{j as l}from"./jsx-runtime-DF2Pcvd1.js";import{r as i}from"./index-B2-qRKKC.js";import{c as I}from"./cn-CytzSlOG.js";const A=400,B=300,c={top:20,right:20,bottom:40,left:60};function M(w){const{data:t,orientation:T="vertical",maxValue:h,showGrid:p=!0,gridLines:f=5}=w,[C,v]=i.useState(null),s=i.useMemo(()=>h!==void 0?h:Math.max(...t.map(e=>e.value),0),[t,h]),x=A-c.left-c.right,m=B-c.top-c.bottom,y=i.useMemo(()=>{const e=t.length,r=8;if(T==="vertical"){const d=r*(e-1),b=(x-d)/e;return t.map((n,k)=>{const j=n.value/s*m;return{x:c.left+k*(b+r),y:c.top+(m-j),width:b,height:j,value:n.value,label:n.label,color:n.color||"var(--action-primary)"}})}else{const d=r*(e-1),b=(m-d)/e;return t.map((n,k)=>{const j=n.value/s*x;return{x:c.left,y:c.top+k*(b+r),width:j,height:b,value:n.value,label:n.label,color:n.color||"var(--action-primary)"}})}},[t,T,s,x,m]),V=i.useMemo(()=>{if(!p)return[];const e=[];for(let r=0;r<=f;r++)e.push(s/f*r);return e},[p,f,s]),g=i.useCallback(e=>{v(e)},[]),u=i.useCallback(()=>{v(null)},[]),H=i.useCallback(e=>{const r=y[e];return{tabIndex:0,role:"graphics-symbol","aria-label":`${r.label}: ${r.value}`,onMouseEnter:()=>g(e),onMouseLeave:u,onFocus:()=>g(e),onBlur:u}},[y,g,u]),o=i.useMemo(()=>({role:"img","aria-label":`Bar chart with ${t.length} bars`}),[t.length]);return{bars:y,maxValue:s,chartProps:o,getBarProps:H,gridLines:V,hoveredIndex:C}}const N=400,W=300,a={top:20,right:20,bottom:40,left:60};function q({data:w,orientation:t="vertical",maxValue:T,showGrid:h=!0,gridLines:p=5,showLabels:f=!0,className:C,width:v=N,height:s=W}){const{bars:x,maxValue:m,chartProps:y,getBarProps:V,gridLines:g,hoveredIndex:u}=M({data:w,orientation:t,maxValue:T,showGrid:h,gridLines:p}),H=v-a.left-a.right,o=s-a.top-a.bottom;return l.jsx("div",{className:I("inline-block",C),children:l.jsxs("svg",{...y,width:v,height:s,className:"select-none",style:{overflow:"visible"},children:[h&&g.map((e,r)=>{const d=t==="vertical"?a.top+o-e/m*o:a.top+r/p*o;return l.jsxs("g",{children:[l.jsx("line",{x1:a.left,y1:d,x2:a.left+H,y2:d,stroke:"var(--border-subtle)",strokeWidth:"1",strokeDasharray:"4 2"}),t==="vertical"&&l.jsx("text",{x:a.left-8,y:d+4,textAnchor:"end",className:"text-xs",fill:"var(--text-secondary)",children:Math.round(e)})]},`grid-${r}`)}),x.map((e,r)=>l.jsxs("g",{children:[l.jsx("rect",{...V(r),x:e.x,y:e.y,width:e.width,height:e.height,fill:e.color,className:I("transition-opacity cursor-pointer","focus:outline-none focus:ring-2 focus:ring-border-focus",u!==null&&u!==r&&"opacity-50"),rx:t==="vertical"?2:0,ry:t==="vertical"?2:0}),f&&l.jsx("text",{x:t==="vertical"?e.x+e.width/2:a.left-8,y:t==="vertical"?a.top+o+20:e.y+e.height/2+4,textAnchor:t==="vertical"?"middle":"end",className:"text-xs pointer-events-none",fill:"var(--text-secondary)",children:e.label}),u===r&&l.jsx("text",{x:t==="vertical"?e.x+e.width/2:e.x+e.width+8,y:t==="vertical"?e.y-8:e.y+e.height/2+4,textAnchor:t==="vertical"?"middle":"start",className:"text-sm font-medium pointer-events-none",fill:"var(--text-primary)",children:e.value})]},`bar-${r}`)),l.jsx("line",{x1:a.left,y1:a.top+o,x2:a.left+H,y2:a.top+o,stroke:"var(--border-default)",strokeWidth:"2"}),l.jsx("line",{x1:a.left,y1:a.top,x2:a.left,y2:a.top+o,stroke:"var(--border-default)",strokeWidth:"2"})]})})}q.__docgenInfo={description:"",methods:[],displayName:"BarChart",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"ChartDataPoint"}],raw:"ChartDataPoint[]"},description:""},orientation:{required:!1,tsType:{name:"union",raw:"'vertical' | 'horizontal'",elements:[{name:"literal",value:"'vertical'"},{name:"literal",value:"'horizontal'"}]},description:"",defaultValue:{value:"'vertical'",computed:!1}},maxValue:{required:!1,tsType:{name:"number"},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},gridLines:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"300",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"400",computed:!1}},showLabels:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{q as B};
