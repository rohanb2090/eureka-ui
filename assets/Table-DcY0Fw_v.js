import{j as s}from"./jsx-runtime-DF2Pcvd1.js";import{r as o}from"./index-B2-qRKKC.js";import{C as B}from"./Checkbox-Cq7NmpSM.js";import{c as I}from"./cn-CytzSlOG.js";function _(S){const{data:a,columns:d,sortBy:h,sortDirection:k,onSort:f,selectedRowIds:u,onSelectionChange:i,getRowId:p=(t,e)=>String(e),"aria-label":R,"aria-labelledby":q}=S,[j,v]=o.useState(null),[l,m]=o.useState(null),[y,c]=o.useState(new Set),x=h!==void 0?h:j,g=k!==void 0?k:l,n=u!==void 0?u:y,N=o.useCallback(t=>{const e=d.find(b=>b.id===t);if(!(e!=null&&e.isSortable))return;let r="asc";x===t&&(g==="asc"?r="desc":g==="desc"&&(r=null)),h===void 0&&(v(r?t:null),m(r)),f==null||f(t,r)},[d,x,g,h,f]),C=o.useCallback(t=>{const e=new Set(n);e.has(t)?e.delete(t):e.add(t),u===void 0&&c(e),i==null||i(e)},[n,u,i]),A=o.useCallback(()=>{const t=a.map((r,b)=>p(r,b)),e=new Set;n.size===a.length||t.forEach(r=>e.add(r)),u===void 0&&c(e),i==null||i(e)},[a,p,n,u,i]),D=o.useMemo(()=>a.length>0&&n.size===a.length,[a,n]),P=o.useMemo(()=>n.size>0&&n.size<a.length,[a,n]),z=o.useCallback(t=>{const e=d.find(T=>T.id===t),r=(e==null?void 0:e.isSortable)??!1,b=x===t,w={role:"columnheader"};return r&&(b&&g?w["aria-sort"]=g==="asc"?"ascending":"descending":w["aria-sort"]="none",w.onClick=()=>N(t),w.onKeyDown=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),N(t))},w.tabIndex=0),w},[d,x,g,N]),E=o.useCallback((t,e)=>{const r=p(t,e);return{role:"row",...n.has(r)&&{"aria-selected":!0},onClick:()=>C(r)}},[p,n,C]),H=o.useCallback(()=>({checked:D,indeterminate:P,onChange:A,"aria-label":"Select all rows"}),[D,P,A]),U=o.useCallback((t,e)=>{const r=p(t,e);return{checked:n.has(r),onChange:()=>C(r),"aria-label":`Select row ${e+1}`}},[p,n,C]);return{tableProps:{role:"table",...R&&{"aria-label":R},...q&&{"aria-labelledby":q},...a.length&&{"aria-rowcount":a.length+1},...d.length&&{"aria-colcount":d.length}},headerProps:{role:"rowgroup"},bodyProps:{role:"rowgroup"},getColumnHeaderProps:z,getRowProps:E,getSelectAllProps:H,getRowSelectProps:U,state:{sortBy:x,sortDirection:g,selectedRowIds:n,allRowsSelected:D,someRowsSelected:P}}}function F({data:S,columns:a,selectable:d=!1,striped:h=!1,className:k,...f}){const{tableProps:u,headerProps:i,bodyProps:p,getColumnHeaderProps:R,getSelectAllProps:q,getRowSelectProps:j,state:v}=_({data:S,columns:a,...f});return s.jsxs("div",{className:"w-full overflow-x-auto",children:[s.jsxs("table",{...u,className:I("w-full border-collapse","text-sm text-[var(--text-primary)]",k),children:[s.jsx("thead",{...i,children:s.jsxs("tr",{className:"border-b border-[var(--border-subtle)]",children:[d&&s.jsx("th",{className:"w-12 px-[var(--spacing-md)] py-[var(--spacing-sm)] text-left",children:s.jsx(B,{...q(),size:"sm"})}),a.map(l=>{const m=R(l.id),y=l.isSortable,c=v.sortBy===l.id;return s.jsx("th",{...m,style:{width:l.width},className:I("px-[var(--spacing-md)] py-[var(--spacing-sm)]","text-left font-medium text-[var(--text-secondary)]",y&&"cursor-pointer hover:text-[var(--text-primary)]","select-none"),children:s.jsxs("div",{className:"flex items-center gap-2",children:[l.header,y&&c&&s.jsx("span",{className:"text-xs","aria-hidden":"true",children:v.sortDirection==="asc"?"↑":"↓"})]})},l.id)})]})}),s.jsx("tbody",{...p,children:S.map((l,m)=>{const y=v.selectedRowIds.has(String(m));return s.jsxs("tr",{className:I("border-b border-[var(--border-subtle)]","transition-colors",h&&m%2===1&&"bg-[var(--bg-subtle)]",y&&"bg-blue-50 dark:bg-blue-950","hover:bg-[var(--bg-subtle)]"),children:[d&&s.jsx("td",{className:"px-[var(--spacing-md)] py-[var(--spacing-sm)]",children:s.jsx(B,{...j(l,m),size:"sm"})}),a.map(c=>s.jsx("td",{className:"px-[var(--spacing-md)] py-[var(--spacing-sm)]",children:c.render?c.render(l):l[c.id]},c.id))]},m)})})]}),S.length===0&&s.jsx("div",{className:"py-[var(--spacing-4xl)] text-center text-[var(--text-muted)]",children:"No data available"})]})}F.__docgenInfo={description:"",methods:[],displayName:"Table",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"T"}],raw:"T[]"},description:"Table rows"},columns:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    id: string;
    header: string;
    isSortable?: boolean;
    render?: (row: T) => ReactNode;
    width?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"header",value:{name:"string",required:!0}},{key:"isSortable",value:{name:"boolean",required:!1}},{key:"render",value:{name:"signature",type:"function",raw:"(row: T) => ReactNode",signature:{arguments:[{type:{name:"T"},name:"row"}],return:{name:"ReactNode"}},required:!1}},{key:"width",value:{name:"string",required:!1}}]}}],raw:`Array<{
    id: string;
    header: string;
    isSortable?: boolean;
    render?: (row: T) => ReactNode;
    width?: string;
}>`},description:"Column definitions"},sortBy:{required:!1,tsType:{name:"string"},description:"Current sort column ID (controlled)"},sortDirection:{required:!1,tsType:{name:"union",raw:"'asc' | 'desc' | null",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"},{name:"null"}]},description:"Current sort direction (controlled)"},onSort:{required:!1,tsType:{name:"signature",type:"function",raw:"(columnId: string, direction: SortDirection) => void",signature:{arguments:[{type:{name:"string"},name:"columnId"},{type:{name:"union",raw:"'asc' | 'desc' | null",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"},{name:"null"}]},name:"direction"}],return:{name:"void"}}},description:"Called when sort changes"},selectedRowIds:{required:!1,tsType:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},description:"Selected row IDs (controlled)"},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedIds: Set<string>) => void",signature:{arguments:[{type:{name:"Set",elements:[{name:"string"}],raw:"Set<string>"},name:"selectedIds"}],return:{name:"void"}}},description:"Called when selection changes"},getRowId:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: T) => string",signature:{arguments:[{type:{name:"T"},name:"row"}],return:{name:"string"}}},description:"Function to get row ID"},caption:{required:!1,tsType:{name:"string"},description:"Table caption"},"aria-label":{required:!1,tsType:{name:"string"},description:"ARIA label"},"aria-labelledby":{required:!1,tsType:{name:"string"},description:"ID of element labeling the table"},selectable:{required:!1,tsType:{name:"boolean"},description:"Whether table has selectable rows",defaultValue:{value:"false",computed:!1}},striped:{required:!1,tsType:{name:"boolean"},description:"Whether table has striped rows",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};export{F as T};
