import{j as o}from"./jsx-runtime-BYYWji4R.js";import{r as b}from"./index-ClcD9ViR.js";import{c as S}from"./cn-CytzSlOG.js";const X=400,_=300,m={top:20,right:40,bottom:40,left:60};function $(P){const{data:c,xMin:f,xMax:h,yMin:M,yMax:v,width:g=X,height:j=_}=P,[H,k]=b.useState(null),n=f!==void 0?f:Math.min(...c.map(e=>e.x),0),a=h!==void 0?h:Math.max(...c.map(e=>e.x),10),l=M!==void 0?M:Math.min(...c.map(e=>e.y),0),d=v!==void 0?v:Math.max(...c.map(e=>e.y),10),T=g-m.left-m.right,p=j-m.top-m.bottom,q=b.useMemo(()=>c.map((e,r)=>{const x=(e.x-n)/(a-n),i=(e.y-l)/(d-l);return{...e,id:e.id||`point-${r}`,cx:m.left+x*T,cy:m.top+p-i*p,r:e.size||5}}),[c,n,a,l,d,T,p]),A=b.useMemo(()=>{const e=[];for(let r=0;r<=5;r++)e.push(n+(a-n)*(r/5));return e},[n,a]),N=b.useMemo(()=>{const e=[];for(let r=0;r<=5;r++)e.push(l+(d-l)*(r/5));return e},[l,d]);return{points:q,xTicks:A,yTicks:N,xMin:n,xMax:a,yMin:l,yMax:d,hoveredPoint:H,setHoveredPoint:k}}const G=450,w=350,t={top:20,right:40,bottom:50,left:60};function F({data:P,xLabel:c,yLabel:f,xMin:h,xMax:M,yMin:v,yMax:g,showGrid:j=!0,showYAxis:H=!0,className:k,width:n=G,height:a=w}){const{points:l,xTicks:d,yTicks:T,xMin:p,xMax:q,yMin:A,yMax:N,hoveredPoint:e,setHoveredPoint:r}=$({data:P,xMin:h,xMax:M,yMin:v,yMax:g,width:n,height:a}),x=n-t.left-t.right,i=a-t.top-t.bottom,E=p??0,W=q??10,I=A??0,Y=N??10;return o.jsx("div",{className:S("inline-block bg-[var(--bg-surface)] p-4",k),children:o.jsxs("svg",{width:n,height:a,className:"select-none",style:{overflow:"visible"},children:[T.map((s,u)=>{const D=(s-I)/(Y-I||1),y=t.top+i-D*i;return o.jsxs("g",{children:[j&&o.jsx("line",{x1:t.left,y1:y,x2:t.left+x,y2:y,stroke:"var(--border-subtle)",strokeWidth:"1",strokeDasharray:"4 2"}),H&&o.jsx("text",{x:t.left-8,y:y+4,textAnchor:"end",className:"text-[10px]",fill:"var(--text-tertiary)",children:s.toFixed(1)})]},`y-${u}`)}),d.map((s,u)=>{const D=(s-E)/(W-E||1),y=t.left+D*x;return o.jsx("g",{children:o.jsx("text",{x:y,y:t.top+i+20,textAnchor:"middle",className:"text-[10px]",fill:"var(--text-tertiary)",children:s.toFixed(1)})},`x-${u}`)}),l.map(s=>{const u=e===s.id;return o.jsx("circle",{cx:s.cx,cy:s.cy,r:u?s.r+2:s.r,fill:s.color||"var(--action-primary)",className:S("transition-all duration-150 cursor-pointer",e&&!u&&"opacity-30"),onMouseEnter:()=>r(s.id),onMouseLeave:()=>r(null)},s.id)}),o.jsx("line",{x1:t.left,y1:t.top+i,x2:t.left+x,y2:t.top+i,stroke:"var(--border-default)",strokeWidth:"2"}),o.jsx("line",{x1:t.left,y1:t.top,x2:t.left,y2:t.top+i,stroke:"var(--border-default)",strokeWidth:"2"}),c&&o.jsx("text",{x:t.left+x/2,y:a+10,textAnchor:"middle",className:"text-xs font-semibold",fill:"var(--text-secondary)",children:c}),f&&o.jsx("text",{transform:`rotate(-90, ${t.left/2}, ${t.top+i/2})`,x:t.left/2,y:t.top+i/2,textAnchor:"middle",className:"text-xs font-semibold",fill:"var(--text-secondary)",children:f})]})})}F.__docgenInfo={description:"",methods:[],displayName:"ScatterPlot",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"ScatterPoint"}],raw:"ScatterPoint[]"},description:""},xLabel:{required:!1,tsType:{name:"string"},description:""},yLabel:{required:!1,tsType:{name:"string"},description:""},xMin:{required:!1,tsType:{name:"number"},description:""},xMax:{required:!1,tsType:{name:"number"},description:""},yMin:{required:!1,tsType:{name:"number"},description:""},yMax:{required:!1,tsType:{name:"number"},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"450",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"350",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},showYAxis:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{F as S};
